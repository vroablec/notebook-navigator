/* Source: src/styles/sections/android-textzoom.css */

/* ========================================================================
   Android textZoom Compensation

   Android WebView scales text via textZoom property. This affects font-size
   and line-height at the rendering level. We detect the scale factor in JS
   and set --nn-android-font-scale, then CSS compensates by dividing values
   by that factor so Android scaling produces correct final sizes.

   Font-size compensation is handled via inline styles in androidFontScale.ts.
   Line-height compensation is handled here in CSS because the .nn-mobile class
   redefines variables and would override inline styles on the outer container.
   ======================================================================== */

/* Override line-height variables with compensated values
   Note: We use a reciprocal variable for division since calc(x / var) can have issues */
.notebook-navigator-android .nn-mobile {
    --nn-android-font-scale-reciprocal: calc(1 / var(--nn-android-font-scale, 1));
    --nn-file-title-line-height: calc(var(--nn-file-title-line-height-mobile) * var(--nn-android-font-scale-reciprocal, 1));
    --nn-file-single-text-line-height: calc(var(--nn-file-single-text-line-height-mobile) * var(--nn-android-font-scale-reciprocal, 1));
    --nn-file-multiline-text-line-height: calc(
        var(--nn-file-multiline-text-line-height-mobile) * var(--nn-android-font-scale-reciprocal, 1)
    );
    /* Note: Do NOT compensate icon size variables - they're used for SVG width/height
       which Android doesn't scale. Only compensate font-size on emoji elements directly. */
}

/* Note counts in navigation pane - !important needed to override other rules */
.notebook-navigator-android .nn-navitem-count {
    font-size: calc(
        var(--nn-navitem-count-font-size-mobile, var(--nn-navitem-count-font-size)) * var(--nn-android-font-scale-reciprocal, 1)
    ) !important;
}

/* Root reorder panel text */
.notebook-navigator-android .nn-root-reorder-hint {
    font-size: calc(
        var(--nn-root-reorder-hint-font-size-mobile, var(--nn-root-reorder-hint-font-size)) * var(--nn-android-font-scale-reciprocal, 1)
    ) !important;
}

/* Emoji and webfont icons - Android scales font-size but not SVG dimensions.
   Only apply to .nn-emoji-icon and .nn-iconfont to avoid breaking Lucide SVG icons. */
.notebook-navigator-android .nn-emoji-icon,
.notebook-navigator-android .nn-iconfont {
    font-size: calc(var(--nn-file-icon-size-mobile, var(--nn-file-icon-size)) * var(--nn-android-font-scale-reciprocal, 1)) !important;
}

/* Height compensation - Android doesn't scale height/min-height, but we need them
   to match the (now compensated) line-height after Android applies textZoom.
   Since line-height var is pre-divided by scale, multiplying by scale here gives
   the original value (21px, 20px, 19px) which matches the scaled line-height. */
.notebook-navigator-android .nn-file-name {
    min-height: calc(var(--nn-file-title-line-height) * var(--filename-rows, 1) * var(--nn-android-font-scale, 1));
    height: calc(var(--nn-file-title-line-height) * var(--filename-rows, 1) * var(--nn-android-font-scale, 1));
}

.notebook-navigator-android .nn-file-preview:not(.nn-file-second-line .nn-file-preview) {
    min-height: calc(var(--nn-file-multiline-text-line-height) * var(--preview-rows, 1) * var(--nn-android-font-scale, 1));
    height: calc(var(--nn-file-multiline-text-line-height) * var(--preview-rows, 1) * var(--nn-android-font-scale, 1));
}

/* Icon vertical centering - line-height is pre-compensated, icon size is not */
.notebook-navigator-android .nn-file-icon-slot {
    margin-top: max(
        0px,
        calc(
            (
                    var(--nn-file-title-line-height) * var(--nn-android-font-scale, 1) -
                        var(--nn-file-icon-size-mobile, var(--nn-file-icon-size))
                ) /
                2
        )
    );
}
